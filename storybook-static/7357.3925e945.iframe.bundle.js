"use strict";(self.webpackChunkcreate_payload_app=self.webpackChunkcreate_payload_app||[]).push([[7357],{"./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/Auth/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>useAuth});__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/jsx-runtime.js"),__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/navigation.js");var react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/index.js");__webpack_require__("./node_modules/.pnpm/sonner@1.7.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/sonner/dist/index.mjs");const Context=(0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)({});const useAuth=()=>(0,react__WEBPACK_IMPORTED_MODULE_2__.use)(Context)},"./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/DocumentInfo/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>DocumentInfoProvider,r:()=>useDocumentInfo});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/jsx-runtime.js"),stringify=__webpack_require__("./node_modules/.pnpm/qs-esm@7.0.2/node_modules/qs-esm/lib/stringify.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/index.js"),Auth=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/Auth/index.js"),utilities_api=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/utilities/api.js"),formatDocTitle=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/utilities/formatDocTitle/index.js"),Config=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/Config/index.js"),Locale=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/Locale/index.js"),Preferences=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/Preferences/index.js"),Translation=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/Translation/index.js"),compiler_runtime=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/compiler-runtime.js");const Context=react.createContext({resetUploadEdits:void 0,updateUploadEdits:void 0,uploadEdits:void 0}),UploadEditsProvider=t0=>{const $=(0,compiler_runtime.c)(5),{children}=t0,[uploadEdits,setUploadEdits]=react.useState(void 0);let t1;$[0]===Symbol.for("react.memo_cache_sentinel")?(t1=()=>{setUploadEdits({})},$[0]=t1):t1=$[0];const resetUploadEdits=t1;let t2;$[1]===Symbol.for("react.memo_cache_sentinel")?(t2=edits=>{setUploadEdits((prevEdits=>({...prevEdits||{},...edits||{}})))},$[1]=t2):t2=$[1];const updateUploadEdits=t2;let t3;return $[2]!==children||$[3]!==uploadEdits?(t3=(0,jsx_runtime.jsx)(Context,{value:{resetUploadEdits,updateUploadEdits,uploadEdits},children}),$[2]=children,$[3]=uploadEdits,$[4]=t3):t3=$[4],t3},hasSavePermission=args=>{const{collectionSlug,docPermissions,globalSlug,isEditing}=args;return collectionSlug?Boolean(isEditing&&docPermissions?.update||!isEditing&&docPermissions?.create):!!globalSlug&&Boolean(docPermissions?.update)},useGetDocPermissions=({id,api,collectionSlug,globalSlug,i18n,locale,permissions,serverURL,setDocPermissions,setHasPublishPermission,setHasSavePermission})=>react.useCallback((async data=>{const params={locale:locale||void 0},idToUse=data?.id||id,newIsEditing=(({id,collectionSlug,globalSlug})=>Boolean(globalSlug||collectionSlug&&!!id))({id:idToUse,collectionSlug,globalSlug});if(newIsEditing){const docAccessURL=collectionSlug?`/${collectionSlug}/access/${idToUse}`:globalSlug?`/globals/${globalSlug}/access`:null;if(docAccessURL){const res=await fetch(`${serverURL}${api}${docAccessURL}?${stringify.A(params)}`,{body:JSON.stringify({...data||{},_status:"draft"}),credentials:"include",headers:{"Accept-Language":i18n.language,"Content-Type":"application/json"},method:"post"}),json=await res.json(),publishedAccessJSON=await fetch(`${serverURL}${api}${docAccessURL}?${stringify.A(params)}`,{body:JSON.stringify({...data||{},_status:"published"}),credentials:"include",headers:{"Accept-Language":i18n.language,"Content-Type":"application/json"},method:"POST"}).then((res=>res.json()));setDocPermissions(json),setHasSavePermission(hasSavePermission({collectionSlug,docPermissions:json,globalSlug,isEditing:newIsEditing})),setHasPublishPermission(publishedAccessJSON?.update)}}else{const newDocPermissions=collectionSlug?permissions?.collections?.[collectionSlug]:permissions?.globals?.[globalSlug];setDocPermissions(newDocPermissions),setHasSavePermission(hasSavePermission({collectionSlug,docPermissions:newDocPermissions,globalSlug,isEditing:newIsEditing}))}}),[serverURL,api,id,permissions,i18n.language,locale,collectionSlug,globalSlug]);var console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const DocumentInfo_Context=(0,react.createContext)({}),useDocumentInfo=()=>(0,react.use)(DocumentInfo_Context),DocumentInfo=({children,...props})=>{const{id,collectionSlug,currentEditor:currentEditorFromProps,docPermissions:docPermissionsFromProps,globalSlug,hasPublishedDoc:hasPublishedDocFromProps,hasPublishPermission:hasPublishPermissionFromProps,hasSavePermission:hasSavePermissionFromProps,initialData,initialState,isLocked:isLockedFromProps,lastUpdateTime:lastUpdateTimeFromProps,mostRecentVersionIsAutosaved:mostRecentVersionIsAutosavedFromProps,unpublishedVersionCount:unpublishedVersionCountFromProps,versionCount:versionCountFromProps}=props,[docPermissions,setDocPermissions]=(0,react.useState)(docPermissionsFromProps),[hasSavePermission,setHasSavePermission]=(0,react.useState)(hasSavePermissionFromProps),[hasPublishPermission,setHasPublishPermission]=(0,react.useState)(hasPublishPermissionFromProps),{permissions}=(0,Auth.A)(),{config:{admin:{dateFormat},routes:{api},serverURL},getEntityConfig}=(0,Config.U)(),collectionConfig=getEntityConfig({collectionSlug}),globalConfig=getEntityConfig({globalSlug}),abortControllerRef=(0,react.useRef)(new AbortController),docConfig=collectionConfig||globalConfig,{i18n}=(0,Translation.B)(),{uploadEdits}=react.use(Context),[documentTitle,setDocumentTitle]=(0,react.useState)((()=>(0,formatDocTitle.G)({collectionConfig,data:{...initialData||{},id},dateFormat,fallback:id?.toString(),globalConfig,i18n}))),[mostRecentVersionIsAutosaved,setMostRecentVersionIsAutosaved]=(0,react.useState)(mostRecentVersionIsAutosavedFromProps),[versionCount,setVersionCount]=(0,react.useState)(versionCountFromProps),[hasPublishedDoc,setHasPublishedDoc]=(0,react.useState)(hasPublishedDocFromProps),[unpublishedVersionCount,setUnpublishedVersionCount]=(0,react.useState)(unpublishedVersionCountFromProps),[documentIsLocked,setDocumentIsLocked]=(0,react.useState)(isLockedFromProps),[currentEditor,setCurrentEditor]=(0,react.useState)(currentEditorFromProps),[lastUpdateTime,setLastUpdateTime]=(0,react.useState)(lastUpdateTimeFromProps),[savedDocumentData,setSavedDocumentData]=(0,react.useState)(initialData),[uploadStatus,setUploadStatus]=(0,react.useState)("idle"),updateUploadStatus=(0,react.useCallback)((status=>{setUploadStatus(status)}),[]),{getPreference,setPreference}=(0,Preferences.g)(),{code:locale}=(0,Locale.Ym)(),{localeIsLoading}=(0,Locale.mp)(),isInitializing=(0,react.useMemo)((()=>void 0===initialState||void 0===initialData||localeIsLoading),[initialData,initialState,localeIsLoading]),baseURL=`${serverURL}${api}`;let slug,pluralType,preferencesKey;globalSlug&&(slug=globalSlug,pluralType="globals",preferencesKey=`global-${slug}`),collectionSlug&&(slug=collectionSlug,pluralType="collections",id&&(preferencesKey=`collection-${slug}-${id}`));const unlockDocument=(0,react.useCallback)((async(docID,slug_0)=>{try{const query=slug_0===globalSlug?`where[globalSlug][equals]=${slug_0}`:`where[document.value][equals]=${docID}&where[document.relationTo][equals]=${slug_0}`,request=await utilities_api.z.get(`${serverURL}${api}/payload-locked-documents?${query}`),{docs}=await request.json();if(docs.length>0){const lockID=docs[0].id;await utilities_api.z.delete(`${serverURL}${api}/payload-locked-documents/${lockID}`,{headers:{"Content-Type":"application/json"}}),setDocumentIsLocked(!1)}}catch(error){console.error("Failed to unlock the document",error)}}),[serverURL,api,globalSlug]),updateDocumentEditor=(0,react.useCallback)((async(docID_0,slug_1,user)=>{try{const query_0=slug_1===globalSlug?`where[globalSlug][equals]=${slug_1}`:`where[document.value][equals]=${docID_0}&where[document.relationTo][equals]=${slug_1}`,request_0=await utilities_api.z.get(`${serverURL}${api}/payload-locked-documents?${query_0}`),{docs:docs_0}=await request_0.json();if(docs_0.length>0){const lockID_0=docs_0[0].id,userData="object"==typeof user?{relationTo:user.collection,value:user.id}:{relationTo:"users",value:user};await utilities_api.z.patch(`${serverURL}${api}/payload-locked-documents/${lockID_0}`,{body:JSON.stringify({user:userData}),headers:{"Content-Type":"application/json"}})}}catch(error_0){console.error("Failed to update the document editor",error_0)}}),[serverURL,api,globalSlug]),getDocPermissions=useGetDocPermissions({id,api,collectionSlug,globalSlug,i18n,locale,permissions,serverURL,setDocPermissions,setHasPublishPermission,setHasSavePermission}),getDocPreferences=(0,react.useCallback)((()=>getPreference(preferencesKey)),[getPreference,preferencesKey]),setDocFieldPreferences=(0,react.useCallback)((async(path,fieldPreferences)=>{const allPreferences=await getDocPreferences();if(preferencesKey)try{await setPreference(preferencesKey,{...allPreferences,fields:{...allPreferences?.fields||{},[path]:{...allPreferences?.fields?.[path],...fieldPreferences}}})}catch(e){console.error(e)}}),[setPreference,preferencesKey,getDocPreferences]),incrementVersionCount=(0,react.useCallback)((()=>{const newCount=versionCount+1;collectionConfig&&collectionConfig.versions?collectionConfig.versions.maxPerDoc>0?setVersionCount(Math.min(newCount,collectionConfig.versions.maxPerDoc)):setVersionCount(newCount):globalConfig&&globalConfig.versions&&(globalConfig.versions.max>0?setVersionCount(Math.min(newCount,globalConfig.versions.max)):setVersionCount(newCount))}),[collectionConfig,globalConfig,versionCount]),updateSavedDocumentData=react.useCallback((json=>{setSavedDocumentData(json)}),[]);(0,react.useEffect)((()=>{setDocumentTitle((0,formatDocTitle.G)({collectionConfig,data:{...savedDocumentData,id},dateFormat,fallback:id?.toString(),globalConfig,i18n}))}),[collectionConfig,globalConfig,savedDocumentData,dateFormat,i18n,id]),(0,react.useEffect)((()=>{const re1=abortControllerRef.current;return()=>{if(re1)try{re1.abort()}catch(_err){}}}),[]);const action=react.useMemo((()=>{const params={depth:0,"fallback-locale":"null",locale,uploadEdits:uploadEdits||void 0};return`${`${baseURL}${"globals"===pluralType?"/globals":""}/${slug}${id?`/${id}`:""}`}${stringify.A(params,{addQueryPrefix:!0})}`}),[baseURL,locale,pluralType,id,slug,uploadEdits]),value={...props,action,currentEditor,docConfig,docPermissions,documentIsLocked,getDocPermissions,getDocPreferences,hasPublishedDoc,hasPublishPermission,hasSavePermission,incrementVersionCount,initialData,initialState,isInitializing,lastUpdateTime,mostRecentVersionIsAutosaved,preferencesKey,savedDocumentData,setCurrentEditor,setDocFieldPreferences,setDocumentIsLocked,setDocumentTitle,setHasPublishedDoc,setLastUpdateTime,setMostRecentVersionIsAutosaved,setUnpublishedVersionCount,setUploadStatus:updateUploadStatus,title:documentTitle,unlockDocument,unpublishedVersionCount,updateDocumentEditor,updateSavedDocumentData,uploadStatus,versionCount};return(0,jsx_runtime.jsx)(DocumentInfo_Context,{value,children})},DocumentInfoProvider=props=>(0,jsx_runtime.jsx)(UploadEditsProvider,{children:(0,jsx_runtime.jsx)(DocumentInfo,{...props})})},"./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/Locale/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ym:()=>useLocale,mp:()=>useLocaleLoading});__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/compiler-runtime.js"),__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/jsx-runtime.js"),__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/navigation.js");var react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/index.js");const LocaleContext=(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)({}),LocaleLoadingContext=(0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)({localeIsLoading:!1,setLocaleIsLoading:_=>{}}),useLocaleLoading=()=>(0,react__WEBPACK_IMPORTED_MODULE_3__.use)(LocaleLoadingContext),useLocale=()=>(0,react__WEBPACK_IMPORTED_MODULE_3__.use)(LocaleContext)},"./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/Preferences/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>usePreferences});__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/jsx-runtime.js"),__webpack_require__("./node_modules/.pnpm/dequal@2.0.3/node_modules/dequal/lite/index.mjs");var react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/index.js");const Context=(0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)({}),usePreferences=()=>(0,react__WEBPACK_IMPORTED_MODULE_2__.use)(Context)},"./node_modules/.pnpm/dequal@2.0.3/node_modules/dequal/lite/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>dequal});var has=Object.prototype.hasOwnProperty;function dequal(foo,bar){var ctor,len;if(foo===bar)return!0;if(foo&&bar&&(ctor=foo.constructor)===bar.constructor){if(ctor===Date)return foo.getTime()===bar.getTime();if(ctor===RegExp)return foo.toString()===bar.toString();if(ctor===Array){if((len=foo.length)===bar.length)for(;len--&&dequal(foo[len],bar[len]););return-1===len}if(!ctor||"object"==typeof foo){for(ctor in len=0,foo){if(has.call(foo,ctor)&&++len&&!has.call(bar,ctor))return!1;if(!(ctor in bar)||!dequal(foo[ctor],bar[ctor]))return!1}return Object.keys(bar).length===len}}return foo!=foo&&bar!=bar}}}]);