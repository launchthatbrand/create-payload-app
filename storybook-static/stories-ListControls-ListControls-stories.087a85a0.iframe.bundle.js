"use strict";(self.webpackChunkcreate_payload_app=self.webpackChunkcreate_payload_app||[]).push([[9864],{"./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/ConfirmationModal/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>ConfirmationModal});var react_compiler_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/compiler-runtime.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/jsx-runtime.js"),_faceless_ui_modal__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/.pnpm/@faceless-ui+modal@3.0.0-beta.2_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/@faceless-ui/modal/dist/useModal/index.js"),_faceless_ui_modal__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/.pnpm/@faceless-ui+modal@3.0.0-beta.2_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/@faceless-ui/modal/dist/Modal/index.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/index.js"),_providers_Translation_index_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/Translation/index.js"),_Button_index_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/Button/index.js"),_Drawer_index_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/Drawer/index.js");const baseClass="confirmation-modal";function ConfirmationModal(props){const $=(0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_0__.c)(33),{body,cancelLabel,className,confirmingLabel,confirmLabel,heading,modalSlug,onCancel:onCancelFromProps,onConfirm:onConfirmFromProps}=props,editDepth=(0,_Drawer_index_js__WEBPACK_IMPORTED_MODULE_3__.cG)(),[confirming,setConfirming]=react__WEBPACK_IMPORTED_MODULE_2__.useState(!1),{closeModal}=(0,_faceless_ui_modal__WEBPACK_IMPORTED_MODULE_4__.h)(),{t}=(0,_providers_Translation_index_js__WEBPACK_IMPORTED_MODULE_5__.B)();let t0;$[0]!==closeModal||$[1]!==confirming||$[2]!==modalSlug||$[3]!==onConfirmFromProps?(t0=async()=>{confirming||(setConfirming(!0),"function"==typeof onConfirmFromProps&&await onConfirmFromProps(),setConfirming(!1),closeModal(modalSlug))},$[0]=closeModal,$[1]=confirming,$[2]=modalSlug,$[3]=onConfirmFromProps,$[4]=t0):t0=$[4];const onConfirm=t0;let t1;$[5]!==closeModal||$[6]!==confirming||$[7]!==modalSlug||$[8]!==onCancelFromProps?(t1=()=>{confirming||(closeModal(modalSlug),"function"==typeof onCancelFromProps&&onCancelFromProps())},$[5]=closeModal,$[6]=confirming,$[7]=modalSlug,$[8]=onCancelFromProps,$[9]=t1):t1=$[9];const onCancel=t1;let t2;$[10]!==className?(t2=[baseClass,className].filter(Boolean),$[10]=className,$[11]=t2):t2=$[11];const t3=t2.join(" "),t4=_Drawer_index_js__WEBPACK_IMPORTED_MODULE_3__.B1+editDepth;let t5;if($[12]!==body||$[13]!==cancelLabel||$[14]!==confirmLabel||$[15]!==confirming||$[16]!==confirmingLabel||$[17]!==heading||$[18]!==modalSlug||$[19]!==onCancel||$[20]!==onConfirm||$[21]!==t||$[22]!==t3||$[23]!==t4){let t6,t7;$[25]!==cancelLabel||$[26]!==t?(t6=cancelLabel||t("general:cancel"),$[25]=cancelLabel,$[26]=t,$[27]=t6):t6=$[27],$[28]!==confirmLabel||$[29]!==confirming||$[30]!==confirmingLabel||$[31]!==t?(t7=confirming?confirmingLabel||`${t("general:loading")}...`:confirmLabel||t("general:confirm"),$[28]=confirmLabel,$[29]=confirming,$[30]=confirmingLabel,$[31]=t,$[32]=t7):t7=$[32],t5=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_faceless_ui_modal__WEBPACK_IMPORTED_MODULE_6__.a,{className:t3,slug:modalSlug,style:{zIndex:t4},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:`${baseClass}__wrapper`,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:`${baseClass}__content`,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("h1",{children:heading}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("p",{children:body})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:`${baseClass}__controls`,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_Button_index_js__WEBPACK_IMPORTED_MODULE_7__.$,{buttonStyle:"secondary",disabled:confirming,id:"confirm-cancel",onClick:onCancel,size:"large",type:"button",children:t6}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_Button_index_js__WEBPACK_IMPORTED_MODULE_7__.$,{id:"confirm-action",onClick:onConfirm,size:"large",children:t7})]})]})}),$[12]=body,$[13]=cancelLabel,$[14]=confirmLabel,$[15]=confirming,$[16]=confirmingLabel,$[17]=heading,$[18]=modalSlug,$[19]=onCancel,$[20]=onConfirm,$[21]=t,$[22]=t3,$[23]=t4,$[24]=t5}else t5=$[24];return t5}},"./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/ListDrawer/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AZ:()=>ListDrawer,YO:()=>ListDrawerToggler,VI:()=>useListDrawer});var compiler_runtime=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/compiler-runtime.js"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/index.js"),useModal=__webpack_require__("./node_modules/.pnpm/@faceless-ui+modal@3.0.0-beta.2_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/@faceless-ui/modal/dist/useModal/index.js"),Config=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/Config/index.js"),EditDepth=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/EditDepth/index.js"),Drawer=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/Drawer/index.js"),mergeListSearchAndWhere=__webpack_require__("./node_modules/.pnpm/payload@3.31.0_graphql@16.10.0_typescript@5.7.3/node_modules/payload/dist/utilities/mergeListSearchAndWhere.js"),elements_DocumentDrawer=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/DocumentDrawer/index.js"),useEffectEvent=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/hooks/useEffectEvent.js"),ServerFunctions=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/ServerFunctions/index.js"),Provider=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/ListDrawer/Provider.js"),Loading=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/Loading/index.js"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const ListDrawerContent=({allowCreate=!0,collectionSlugs,disableQueryPresets,drawerSlug,enableRowSelections,filterOptions,onBulkSelect,onSelect,overrideEntityVisibility=!0,selectedCollection:selectedCollectionFromProps})=>{const{closeModal,isModalOpen}=(0,useModal.h)(),{serverFunction}=(0,ServerFunctions.gL)(),[ListView,setListView]=(0,react.useState)(void 0),[isLoading,setIsLoading]=(0,react.useState)(!0),{config:{collections},getEntityConfig}=(0,Config.U)(),isOpen=isModalOpen(drawerSlug),enabledCollections=collections.filter((({slug})=>collectionSlugs.includes(slug))),[selectedOption,setSelectedOption]=(0,react.useState)((()=>{const initialSelection=selectedCollectionFromProps||enabledCollections[0]?.slug,found=getEntityConfig({collectionSlug:initialSelection});return found?{label:found.labels,value:found.slug}:void 0})),[DocumentDrawer,DocumentDrawerToggler,{drawerSlug:documentDrawerSlug}]=(0,elements_DocumentDrawer.Q5)({collectionSlug:selectedOption.value}),updateSelectedOption=(0,useEffectEvent.J)((selectedCollectionFromProps_0=>{selectedCollectionFromProps_0&&selectedCollectionFromProps_0!==selectedOption?.value&&setSelectedOption({label:getEntityConfig({collectionSlug:selectedCollectionFromProps_0})?.labels,value:selectedCollectionFromProps_0})}));(0,react.useEffect)((()=>{updateSelectedOption(selectedCollectionFromProps)}),[selectedCollectionFromProps]);const renderList=(0,react.useCallback)((async(slug_0,query)=>{try{const newQuery={...query||{},where:{...query?.where||{}}},filterOption=filterOptions?.[slug_0];filterOptions&&"boolean"!=typeof filterOption&&(newQuery.where=(0,mergeListSearchAndWhere.Y)(newQuery.where,filterOption));const{List:ViewResult}=await serverFunction({name:"render-list",args:{allowCreate,collectionSlug:slug_0,disableBulkDelete:!0,disableBulkEdit:!0,disableQueryPresets,drawerSlug,enableRowSelections,overrideEntityVisibility,query:newQuery}});setListView(ViewResult),setIsLoading(!1)}catch(_err){console.error("Error rendering List View: ",_err),isOpen&&closeModal(drawerSlug)}}),[serverFunction,closeModal,allowCreate,drawerSlug,isOpen,enableRowSelections,filterOptions,overrideEntityVisibility,disableQueryPresets]);(0,react.useEffect)((()=>{ListView||renderList(selectedOption.value)}),[renderList,ListView,selectedOption.value]);const onCreateNew=(0,react.useCallback)((({doc})=>{"function"==typeof onSelect&&onSelect({collectionSlug:selectedOption.value,doc,docID:doc.id}),closeModal(documentDrawerSlug),closeModal(drawerSlug)}),[closeModal,documentDrawerSlug,drawerSlug,onSelect,selectedOption.value]),onQueryChange=(0,react.useCallback)((query_0=>{renderList(selectedOption.value,query_0)}),[renderList,selectedOption.value]),setMySelectedOption=(0,react.useCallback)((incomingSelection=>{setSelectedOption(incomingSelection),renderList(incomingSelection.value)}),[renderList]);return isLoading?(0,jsx_runtime.jsx)(Loading.p8,{}):(0,jsx_runtime.jsxs)(Provider.A0,{allowCreate,createNewDrawerSlug:documentDrawerSlug,DocumentDrawerToggler,drawerSlug,enabledCollections:collectionSlugs,onBulkSelect,onQueryChange,onSelect,selectedOption,setSelectedOption:setMySelectedOption,children:[ListView,(0,jsx_runtime.jsx)(DocumentDrawer,{onSave:onCreateNew})]})},ListDrawerToggler=({children,className,disabled,drawerSlug,onClick,...rest})=>(0,jsx_runtime.jsx)(Drawer.cc,{className:[className,"list-drawer__toggler"].filter(Boolean).join(" "),disabled,onClick,slug:drawerSlug,...rest,children}),ListDrawer=props=>{const{drawerSlug}=props;return(0,jsx_runtime.jsx)(Drawer._s,{className:"list-drawer",gutter:!1,Header:null,slug:drawerSlug,children:(0,jsx_runtime.jsx)(ListDrawerContent,{...props})})},useListDrawer=t0=>{const $=(0,compiler_runtime.c)(42),{collectionSlugs:collectionSlugsFromProps,filterOptions,selectedCollection,uploads}=t0,{config:t1}=(0,Config.U)(),{collections}=t1,drawerDepth=(0,EditDepth.lU)(),uuid=(0,react.useId)(),{closeModal,modalState,openModal,toggleModal}=(0,useModal.h)(),[isOpen,setIsOpen]=(0,react.useState)(!1),[collectionSlugs,setCollectionSlugs]=(0,react.useState)(collectionSlugsFromProps);let t2;$[0]!==drawerDepth||$[1]!==uuid?(t2=(({depth,uuid})=>`list-drawer_${depth}_${uuid}`)({depth:drawerDepth,uuid}),$[0]=drawerDepth,$[1]=uuid,$[2]=t2):t2=$[2];const drawerSlug=t2;let t3,t4,t5,t6,t7;$[3]!==drawerSlug||$[4]!==modalState?(t3=()=>{setIsOpen(Boolean(modalState[drawerSlug]?.isOpen))},t4=[modalState,drawerSlug],$[3]=drawerSlug,$[4]=modalState,$[5]=t3,$[6]=t4):(t3=$[5],t4=$[6]),(0,react.useEffect)(t3,t4),$[7]!==collectionSlugs||$[8]!==collections||$[9]!==uploads?(t5=()=>{if(!collectionSlugs||0===collectionSlugs.length){const filteredCollectionSlugs=collections.filter((t7=>{const{upload}=t7;return!uploads||!0===Boolean(upload)}));setCollectionSlugs(filteredCollectionSlugs.map(_temp))}},t6=[collectionSlugs,uploads,collections],$[7]=collectionSlugs,$[8]=collections,$[9]=uploads,$[10]=t5,$[11]=t6):(t5=$[10],t6=$[11]),(0,react.useEffect)(t5,t6),$[12]!==drawerSlug||$[13]!==toggleModal?(t7=()=>{toggleModal(drawerSlug)},$[12]=drawerSlug,$[13]=toggleModal,$[14]=t7):t7=$[14];const toggleDrawer=t7;let t8;$[15]!==closeModal||$[16]!==drawerSlug?(t8=()=>{closeModal(drawerSlug)},$[15]=closeModal,$[16]=drawerSlug,$[17]=t8):t8=$[17];const closeDrawer=t8;let t9;$[18]!==drawerSlug||$[19]!==openModal?(t9=()=>{openModal(drawerSlug)},$[18]=drawerSlug,$[19]=openModal,$[20]=t9):t9=$[20];const openDrawer=t9;let t10,t11;$[21]!==closeDrawer||$[22]!==collectionSlugs||$[23]!==drawerSlug||$[24]!==filterOptions||$[25]!==selectedCollection||$[26]!==uploads?(t11=props=>(0,react.createElement)(ListDrawer,{...props,closeDrawer,collectionSlugs,drawerSlug,filterOptions,key:drawerSlug,selectedCollection,uploads}),$[21]=closeDrawer,$[22]=collectionSlugs,$[23]=drawerSlug,$[24]=filterOptions,$[25]=selectedCollection,$[26]=uploads,$[27]=t11):t11=$[27],t10=t11;const MemoizedDrawer=t10;let t12,t13;$[28]!==drawerSlug?(t13=props_0=>(0,jsx_runtime.jsx)(ListDrawerToggler,{...props_0,drawerSlug}),$[28]=drawerSlug,$[29]=t13):t13=$[29],t12=t13;const MemoizedDrawerToggler=t12;let t14,t15;$[30]!==closeDrawer||$[31]!==collectionSlugs||$[32]!==drawerDepth||$[33]!==drawerSlug||$[34]!==isOpen||$[35]!==openDrawer||$[36]!==toggleDrawer?(t15={closeDrawer,collectionSlugs,drawerDepth,drawerSlug,isDrawerOpen:isOpen,openDrawer,setCollectionSlugs,toggleDrawer},$[30]=closeDrawer,$[31]=collectionSlugs,$[32]=drawerDepth,$[33]=drawerSlug,$[34]=isOpen,$[35]=openDrawer,$[36]=toggleDrawer,$[37]=t15):t15=$[37],t14=t15;const MemoizedDrawerState=t14;let t16;return $[38]!==MemoizedDrawer||$[39]!==MemoizedDrawerState||$[40]!==MemoizedDrawerToggler?(t16=[MemoizedDrawer,MemoizedDrawerToggler,MemoizedDrawerState],$[38]=MemoizedDrawer,$[39]=MemoizedDrawerState,$[40]=MemoizedDrawerToggler,$[41]=t16):t16=$[41],t16};function _temp(t0){const{slug}=t0;return slug}},"./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/Popup/PopupButtonList/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$n:()=>Button,e2:()=>ButtonGroup});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/jsx-runtime.js"),_Link_index_js__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/Link/index.js"));const baseClass="popup-button-list",ButtonGroup=({buttonSize="default",children,className,textAlign="left"})=>{const classes=[baseClass,className,`${baseClass}__text-align--${textAlign}`,`${baseClass}__button-size--${buttonSize}`].filter(Boolean).join(" ");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:classes,children})},Button=({id,active,children,className,disabled,href,onClick})=>{const classes=[`${baseClass}__button`,active&&`${baseClass}__button--selected`,className].filter(Boolean).join(" ");if(!disabled){if(href)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Link_index_js__WEBPACK_IMPORTED_MODULE_2__.N,{className:classes,href,id,onClick:e=>{onClick&&onClick(e)},prefetch:!1,children});if(onClick)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:classes,id,onClick:e=>{onClick&&onClick(e)},type:"button",children})}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:classes,id,children})}},"./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/SearchFilter/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>SearchFilter});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/index.js"),next_navigation_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/navigation.js"),_hooks_useDebounce_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/hooks/useDebounce.js");const SearchFilter=props=>{const{handleChange,initialParams,label}=props,pathname=(0,next_navigation_js__WEBPACK_IMPORTED_MODULE_2__.usePathname)(),[search,setSearch]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("string"==typeof initialParams?.search?initialParams?.search:void 0),shouldUpdateState=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(!0),previousSearch=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)("string"==typeof initialParams?.search?initialParams?.search:void 0),debouncedSearch=(0,_hooks_useDebounce_js__WEBPACK_IMPORTED_MODULE_3__.d)(search,300);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{initialParams?.search!==previousSearch.current&&(shouldUpdateState.current=!1,setSearch(initialParams?.search),previousSearch.current=initialParams?.search)}),[initialParams?.search,pathname]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{debouncedSearch!==previousSearch.current&&shouldUpdateState.current&&(handleChange&&handleChange(debouncedSearch),previousSearch.current=debouncedSearch)}),[debouncedSearch,handleChange]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"search-filter",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{"aria-label":label,className:"search-filter__input",id:"search-filter-input",onChange:e=>{shouldUpdateState.current=!0,setSearch(e.target.value)},placeholder:label,type:"text",value:search||""})})}},"./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/Translation/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>Translation});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/jsx-runtime.js");__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/index.js");const RecursiveTranslation=({elements,translationString})=>{const sections=translationString.split(/(<[^>]+>.*?<\/[^>]+>)/g);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:sections.map(((section,index)=>{if(elements&&section.startsWith("<")&&section.endsWith(">")){const elementKey=section[1],Element=elements[elementKey];if(Element){const regex=new RegExp(`<${elementKey}>(.*?)</${elementKey}>`,"g"),children=section.replace(regex,((_,group)=>group));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Element,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RecursiveTranslation,{translationString:children})},index)}}return section}))})},Translation=({elements,i18nKey,t,variables})=>{const stringWithVariables=t(i18nKey,variables||{});return elements?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(RecursiveTranslation,{elements,translationString:stringWithVariables}):stringWithVariables}},"./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/icons/Search/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>SearchIcon});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/jsx-runtime.js");__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/index.js");const SearchIcon=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg",{className:"icon icon--search",fill:"none",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path",{className:"stroke",d:"M16 16L13.1333 13.1333M14.6667 9.33333C14.6667 12.2789 12.2789 14.6667 9.33333 14.6667C6.38781 14.6667 4 12.2789 4 9.33333C4 6.38781 6.38781 4 9.33333 4C12.2789 4 14.6667 6.38781 14.6667 9.33333Z",strokeLinecap:"square"})})},"./node_modules/.pnpm/payload@3.31.0_graphql@16.10.0_typescript@5.7.3/node_modules/payload/dist/utilities/flattenTopLevelFields.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _fields_config_types_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/payload@3.31.0_graphql@16.10.0_typescript@5.7.3/node_modules/payload/dist/fields/config/types.js");const __WEBPACK_DEFAULT_EXPORT__=function flattenFields(fields,keepPresentationalFields){return fields.reduce(((acc,field)=>{if((0,_fields_config_types_js__WEBPACK_IMPORTED_MODULE_0__.Z7)(field)||keepPresentationalFields&&(0,_fields_config_types_js__WEBPACK_IMPORTED_MODULE_0__.aO)(field))acc.push(field);else if((0,_fields_config_types_js__WEBPACK_IMPORTED_MODULE_0__.sd)(field))acc.push(...flattenFields(field.fields,keepPresentationalFields));else if("tabs"===field.type&&"tabs"in field)return[...acc,...field.tabs.reduce(((tabFields,tab)=>(0,_fields_config_types_js__WEBPACK_IMPORTED_MODULE_0__.pz)(tab)?[...tabFields,{...tab,type:"tab"}]:[...tabFields,...flattenFields(tab.fields,keepPresentationalFields)]),[])];return acc}),[])}},"./src/stories/ListControls/ListControls.stories.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ListControls_stories});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/index.js"),dist=__webpack_require__("./node_modules/.pnpm/@faceless-ui+window-info@3.0.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/@faceless-ui/window-info/dist/index.js"),dist_exports=__webpack_require__("./node_modules/.pnpm/@payloadcms+translations@3.31.0/node_modules/@payloadcms/translations/dist/exports/index.js"),validateWhereQuery=__webpack_require__("./node_modules/.pnpm/payload@3.31.0_graphql@16.10.0_typescript@5.7.3/node_modules/payload/dist/utilities/validateWhereQuery.js");const PopupListDivider=()=>(0,jsx_runtime.jsx)("hr",{className:"popup-divider"});var Popup=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/Popup/index.js"),PopupButtonList=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/Popup/PopupButtonList/index.js"),flattenTopLevelFields=__webpack_require__("./node_modules/.pnpm/payload@3.31.0_graphql@16.10.0_typescript@5.7.3/node_modules/payload/dist/utilities/flattenTopLevelFields.js");var Chevron=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/icons/Chevron/index.js");const Dots_baseClass="dots",Dots=({ariaLabel,className,noBackground,orientation="vertical"})=>(0,jsx_runtime.jsxs)("div",{"aria-label":ariaLabel,className:[className,Dots_baseClass,noBackground&&`${Dots_baseClass}--no-background`,orientation&&`${Dots_baseClass}--${orientation}`].filter(Boolean).join(" "),children:[(0,jsx_runtime.jsx)("div",{}),(0,jsx_runtime.jsx)("div",{}),(0,jsx_runtime.jsx)("div",{})]});var Search=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/icons/Search/index.js"),context=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/ListQuery/context.js"),Translation=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/Translation/index.js"),AnimateHeight=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/AnimateHeight/index.js"),ColumnSelector=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/ColumnSelector/index.js"),Pill=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/Pill/index.js"),SearchFilter=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/SearchFilter/index.js"),WhereBuilder=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/WhereBuilder/index.js"),compiler_runtime=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/compiler-runtime.js");const PeopleIcon=({className})=>(0,jsx_runtime.jsx)("svg",{className:["icon","icon--people",className].filter(Boolean).join(" "),height:"14",viewBox:"0 0 16 14",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("path",{className:"stroke",d:"M12.0002 13C12.0002 11.5855 11.4383 10.229 10.4381 9.22876C9.43787 8.22857 8.08132 7.66667 6.66683 7.66667M6.66683 7.66667C5.25234 7.66667 3.89579 8.22857 2.89559 9.22876C1.8954 10.229 1.3335 11.5855 1.3335 13M6.66683 7.66667C8.50778 7.66667 10.0002 6.17428 10.0002 4.33333C10.0002 2.49238 8.50778 1 6.66683 1C4.82588 1 3.3335 2.49238 3.3335 4.33333C3.3335 6.17428 4.82588 7.66667 6.66683 7.66667ZM14.6668 12.3333C14.6668 10.0867 13.3335 8 12.0002 7C12.4384 6.67118 12.7889 6.23939 13.0205 5.74285C13.2522 5.2463 13.3578 4.70031 13.3282 4.1532C13.2985 3.60609 13.1344 3.07472 12.8505 2.60613C12.5665 2.13754 12.1714 1.74617 11.7002 1.46667",strokeLinecap:"square"})});var X=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/icons/X/index.js"),Config=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/Config/index.js");const ActiveQueryPreset_baseClass="active-query-preset";function ActiveQueryPreset(t0){const $=(0,compiler_runtime.c)(36),{activePreset,openPresetListDrawer,resetPreset}=t0,{i18n,t}=(0,Translation.B)(),{getEntityConfig}=(0,Config.U)();let t1,t10,t11,t2,t3,t4,t5,t6,t7,t8,t9,t12;if($[0]!==activePreset||$[1]!==getEntityConfig||$[2]!==i18n||$[3]!==openPresetListDrawer||$[4]!==t){const presetsConfig=getEntityConfig({collectionSlug:"payload-query-presets"});t10=jsx_runtime.jsxs,t11=Pill.a;const t12=activePreset&&`${ActiveQueryPreset_baseClass}--active`;let t13;$[16]!==t12?(t13=[ActiveQueryPreset_baseClass,t12].filter(Boolean),$[16]=t12,$[17]=t13):t13=$[17],t6=t13.join(" "),t7="select-preset",$[18]!==openPresetListDrawer?(t8=()=>{openPresetListDrawer()},$[18]=openPresetListDrawer,$[19]=t8):t8=$[19],t9=activePreset?"always-white":"light",$[20]!==activePreset?.isShared?(t5=activePreset?.isShared&&(0,jsx_runtime.jsx)(PeopleIcon,{className:`${ActiveQueryPreset_baseClass}__shared`}),$[20]=activePreset?.isShared,$[21]=t5):t5=$[21],t3=jsx_runtime.jsx,t4="div",t1=`${ActiveQueryPreset_baseClass}__label-text`,t2=activePreset?.title||t("general:selectLabel",{label:(0,dist_exports.sC)(presetsConfig.labels.singular,i18n)}),$[0]=activePreset,$[1]=getEntityConfig,$[2]=i18n,$[3]=openPresetListDrawer,$[4]=t,$[5]=t1,$[6]=t10,$[7]=t11,$[8]=t2,$[9]=t3,$[10]=t4,$[11]=t5,$[12]=t6,$[13]=t7,$[14]=t8,$[15]=t9}else t1=$[5],t10=$[6],t11=$[7],t2=$[8],t3=$[9],t4=$[10],t5=$[11],t6=$[12],t7=$[13],t8=$[14],t9=$[15];return $[22]!==activePreset||$[23]!==resetPreset||$[24]!==t1||$[25]!==t10||$[26]!==t11||$[27]!==t2||$[28]!==t3||$[29]!==t4||$[30]!==t5||$[31]!==t6||$[32]!==t7||$[33]!==t8||$[34]!==t9?(t12=t10(t11,{className:t6,id:t7,onClick:t8,pillStyle:t9,children:[t5,t3(t4,{className:t1,children:t2}),activePreset?(0,jsx_runtime.jsx)("div",{className:`${ActiveQueryPreset_baseClass}__clear`,id:"clear-preset",onClick:async e=>{e.stopPropagation(),await resetPreset()},onKeyDown:async e_0=>{e_0.stopPropagation(),await resetPreset()},role:"button",tabIndex:0,children:(0,jsx_runtime.jsx)(X.u,{})}):null]}),$[22]=activePreset,$[23]=resetPreset,$[24]=t1,$[25]=t10,$[26]=t11,$[27]=t2,$[28]=t3,$[29]=t4,$[30]=t5,$[31]=t6,$[32]=t7,$[33]=t8,$[34]=t9,$[35]=t12):t12=$[35],t12}var types=__webpack_require__("./node_modules/.pnpm/payload@3.31.0_graphql@16.10.0_typescript@5.7.3/node_modules/payload/dist/fields/config/types.js");var useModal=__webpack_require__("./node_modules/.pnpm/@faceless-ui+modal@3.0.0-beta.2_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/@faceless-ui/modal/dist/useModal/index.js"),transformColumnPreferences=__webpack_require__("./node_modules/.pnpm/payload@3.31.0_graphql@16.10.0_typescript@5.7.3/node_modules/payload/dist/utilities/transformColumnPreferences.js"),sonner_dist=__webpack_require__("./node_modules/.pnpm/sonner@1.7.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/sonner/dist/index.mjs"),ConfirmationModal=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/ConfirmationModal/index.js"),DocumentDrawer=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/DocumentDrawer/index.js"),elements_ListDrawer=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/ListDrawer/index.js");const PopupListGroupLabel=({label})=>(0,jsx_runtime.jsx)("p",{className:"popup-list-group-label",children:label});var elements_Translation=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/Translation/index.js");const ListControls=props=>{const{beforeActions,collectionConfig,collectionSlug,disableQueryPresets,enableColumns=!0,enableSort=!1,listMenuItems:listMenuItemsFromProps,queryPreset:activePreset,queryPresetPermissions,renderedFilters,resolvedFilterOptions}=props,{handleSearchChange,query}=(0,context.UF)(),{CreateNewPresetDrawer,DeletePresetModal,EditPresetDrawer,hasModifiedPreset,openPresetListDrawer,PresetListDrawer,queryPresetMenuItems,resetPreset}=(({activePreset,collectionSlug,queryPresetPermissions})=>{const{modified,query,refineListData,setModified:setQueryModified}=(0,context.UF)(),{i18n,t}=(0,Translation.B)(),{openModal}=(0,useModal.h)(),{config:{routes:{api:apiRoute}},getEntityConfig}=(0,Config.U)(),presetConfig=getEntityConfig({collectionSlug:"payload-query-presets"}),[PresetDocumentDrawer,,{openDrawer:openDocumentDrawer}]=(0,DocumentDrawer.Q5)({id:activePreset?.id,collectionSlug:"payload-query-presets"}),[CreateNewPresetDrawer,,{closeDrawer:closeCreateNewDrawer,openDrawer:openCreateNewDrawer}]=(0,DocumentDrawer.Q5)({collectionSlug:"payload-query-presets"}),[ListDrawer,,{closeDrawer:closeListDrawer,openDrawer:openListDrawer}]=(0,elements_ListDrawer.VI)({collectionSlugs:["payload-query-presets"]}),handlePresetChange=(0,react.useCallback)((async preset=>{await refineListData({columns:preset.columns?(0,transformColumnPreferences.F)(preset.columns):void 0,preset:preset.id,where:preset.where},!1)}),[refineListData]),resetQueryPreset=(0,react.useCallback)((async()=>{await refineListData({columns:void 0,preset:void 0,where:void 0},!1)}),[refineListData]),handleDeletePreset=(0,react.useCallback)((async()=>{try{await fetch(`${apiRoute}/payload-query-presets/${activePreset.id}`,{method:"DELETE"}).then((async res=>{try{const json=await res.json();res.status<400?(sonner_dist.oR.success(t("general:titleDeleted",{label:(0,dist_exports.sC)(presetConfig?.labels?.singular,i18n),title:activePreset.title})),await resetQueryPreset()):json.errors?json.errors.forEach((error=>sonner_dist.oR.error(error.message))):sonner_dist.oR.error(t("error:deletingTitle",{title:activePreset.title}))}catch(_err){sonner_dist.oR.error(t("error:deletingTitle",{title:activePreset.title}))}}))}catch(_err){sonner_dist.oR.error(t("error:deletingTitle",{title:activePreset.title}))}}),[apiRoute,activePreset?.id,activePreset?.title,t,presetConfig,i18n,resetQueryPreset]),saveCurrentChanges=(0,react.useCallback)((async()=>{try{await fetch(`${apiRoute}/payload-query-presets/${activePreset.id}`,{body:JSON.stringify({columns:(0,transformColumnPreferences.l)(query.columns),where:query.where}),credentials:"include",headers:{"Content-Type":"application/json"},method:"PATCH"}).then((async res=>{try{const json=await res.json();res.status<400?(sonner_dist.oR.success(t("general:updatedLabelSuccessfully",{label:(0,dist_exports.sC)(presetConfig?.labels?.singular,i18n)})),setQueryModified(!1)):json.errors?json.errors.forEach((error=>sonner_dist.oR.error(error.message))):sonner_dist.oR.error(t("error:unknown"))}catch(_err){sonner_dist.oR.error(t("error:unknown"))}}))}catch(_err){sonner_dist.oR.error(t("error:unknown"))}}),[apiRoute,activePreset?.id,query.columns,query.where,t,presetConfig?.labels?.singular,i18n,setQueryModified]),queryPresetMenuItems=(0,react.useMemo)((()=>{const menuItems=[(0,jsx_runtime.jsx)(PopupListGroupLabel,{label:(0,dist_exports.sC)(presetConfig?.labels?.plural,i18n)},"preset-group-label")];return activePreset&&modified&&(menuItems.push((0,jsx_runtime.jsx)(PopupButtonList.$n,{onClick:async()=>{await refineListData({columns:(0,transformColumnPreferences.F)(activePreset.columns),where:activePreset.where},!1)},children:t("general:reset")})),queryPresetPermissions.update&&menuItems.push((0,jsx_runtime.jsx)(PopupButtonList.$n,{onClick:async()=>{await saveCurrentChanges()},children:activePreset.isShared?t("general:updateForEveryone"):t("general:save")}))),menuItems.push((0,jsx_runtime.jsx)(PopupButtonList.$n,{onClick:()=>{openCreateNewDrawer()},children:t("general:createNew")})),activePreset&&queryPresetPermissions?.delete&&menuItems.push((0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(PopupButtonList.$n,{onClick:()=>openModal("confirm-delete-preset"),children:t("general:delete")}),(0,jsx_runtime.jsx)(PopupButtonList.$n,{onClick:()=>{openDocumentDrawer()},children:t("general:edit")})]})),menuItems}),[activePreset,queryPresetPermissions?.delete,queryPresetPermissions?.update,openCreateNewDrawer,openDocumentDrawer,openModal,saveCurrentChanges,t,refineListData,modified,presetConfig?.labels?.plural,i18n]);return{CreateNewPresetDrawer:(0,jsx_runtime.jsx)(CreateNewPresetDrawer,{initialData:{columns:(0,transformColumnPreferences.l)(query.columns),relatedCollection:collectionSlug,where:query.where},onSave:async({doc})=>{closeCreateNewDrawer(),await handlePresetChange(doc)},redirectAfterCreate:!1}),DeletePresetModal:(0,jsx_runtime.jsx)(ConfirmationModal.R,{body:(0,jsx_runtime.jsx)(elements_Translation.w,{elements:{1:({children})=>(0,jsx_runtime.jsx)("strong",{children})},i18nKey:"general:aboutToDelete",t,variables:{label:presetConfig?.labels?.singular,title:activePreset?.title}}),confirmingLabel:t("general:deleting"),heading:t("general:confirmDeletion"),modalSlug:"confirm-delete-preset",onConfirm:handleDeletePreset}),EditPresetDrawer:(0,jsx_runtime.jsx)(PresetDocumentDrawer,{onDelete:()=>{},onDuplicate:async({doc})=>{await handlePresetChange(doc)},onSave:async({doc})=>{await handlePresetChange(doc)}}),hasModifiedPreset:modified,openPresetListDrawer:openListDrawer,PresetListDrawer:(0,jsx_runtime.jsx)(ListDrawer,{allowCreate:!1,disableQueryPresets:!0,onSelect:async({doc})=>{closeListDrawer(),await handlePresetChange(doc)}}),queryPresetMenuItems,resetPreset:resetQueryPreset}})({activePreset,collectionSlug,queryPresetPermissions}),titleField=(collection=>{const{admin:{useAsTitle},fields}=collection,topLevelFields=(0,flattenTopLevelFields.A)(fields);return topLevelFields?.find((field=>"name"in field&&field.name===useAsTitle))})(collectionConfig),{i18n,t}=(0,Translation.B)(),{breakpoints:{s:smallBreak}}=(0,dist.Cy)(),searchLabel=(titleField&&(0,dist_exports.sC)(!("label"in titleField)||"string"!=typeof titleField.label&&"object"!=typeof titleField.label?"name"in titleField?titleField.name:null:titleField.label,i18n))??"ID",listSearchableFields=((listSearchableFields,fields)=>{if(listSearchableFields)return(0,flattenTopLevelFields.A)(fields).filter((field=>(0,types.Z7)(field)&&listSearchableFields.includes(field.name)));return null})(collectionConfig.admin.listSearchableFields,collectionConfig.fields),searchLabelTranslated=(0,react.useRef)(t("general:searchBy",{label:(0,dist_exports.sC)(searchLabel,i18n)})),hasWhereParam=(0,react.useRef)(Boolean(query?.where)),shouldInitializeWhereOpened=(0,validateWhereQuery.Q)(query?.where),[visibleDrawer,setVisibleDrawer]=(0,react.useState)(shouldInitializeWhereOpened?"where":void 0);(0,react.useEffect)((()=>{hasWhereParam.current&&!query?.where?hasWhereParam.current=!1:query?.where&&(hasWhereParam.current=!0)}),[setVisibleDrawer,query?.where]),(0,react.useEffect)((()=>{searchLabelTranslated.current=listSearchableFields?.length>0?listSearchableFields.reduce(((placeholderText,field,i)=>{const label="label"in field&&field.label?field.label:"name"in field?field.name:null;return 0===i?`${t("general:searchBy",{label:(0,dist_exports.sC)(label,i18n)})}`:i===listSearchableFields.length-1?`${placeholderText} ${t("general:or")} ${(0,dist_exports.sC)(label,i18n)}`:`${placeholderText}, ${(0,dist_exports.sC)(label,i18n)}`}),""):t("general:searchBy",{label:(0,dist_exports.sC)(searchLabel,i18n)})}),[t,listSearchableFields,i18n,searchLabel]);let listMenuItems=listMenuItemsFromProps;return collectionConfig?.enableQueryPresets&&!disableQueryPresets&&queryPresetMenuItems?.length>0&&(listMenuItems=[...queryPresetMenuItems,listMenuItemsFromProps?.length>0?(0,jsx_runtime.jsx)(PopupListDivider,{},"divider"):null,...listMenuItemsFromProps||[]]),(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"list-controls",children:[(0,jsx_runtime.jsxs)("div",{className:"list-controls__wrap",children:[(0,jsx_runtime.jsx)(Search.W,{}),(0,jsx_runtime.jsx)(SearchFilter.$,{fieldName:titleField&&"name"in titleField?titleField?.name:null,handleChange:search=>{handleSearchChange(search)},initialParams:query,label:searchLabelTranslated.current},collectionSlug),activePreset&&hasModifiedPreset?(0,jsx_runtime.jsx)("div",{className:"list-controls__modified",children:"Modified"}):null,(0,jsx_runtime.jsx)("div",{className:"list-controls__buttons",children:(0,jsx_runtime.jsxs)("div",{className:"list-controls__buttons-wrap",children:[!smallBreak&&(0,jsx_runtime.jsx)(react.Fragment,{children:beforeActions&&beforeActions}),enableColumns&&(0,jsx_runtime.jsx)(Pill.a,{"aria-controls":"list-controls-columns","aria-expanded":"columns"===visibleDrawer,className:"list-controls__toggle-columns",icon:(0,jsx_runtime.jsx)(Chevron.z,{direction:"columns"===visibleDrawer?"up":"down"}),onClick:()=>setVisibleDrawer("columns"!==visibleDrawer?"columns":void 0),pillStyle:"light",children:t("general:columns")}),(0,jsx_runtime.jsx)(Pill.a,{"aria-controls":"list-controls-where","aria-expanded":"where"===visibleDrawer,className:"list-controls__toggle-where",icon:(0,jsx_runtime.jsx)(Chevron.z,{direction:"where"===visibleDrawer?"up":"down"}),onClick:()=>setVisibleDrawer("where"!==visibleDrawer?"where":void 0),pillStyle:"light",children:t("general:filters")}),enableSort&&(0,jsx_runtime.jsx)(Pill.a,{"aria-controls":"list-controls-sort","aria-expanded":"sort"===visibleDrawer,className:"list-controls__toggle-sort",icon:(0,jsx_runtime.jsx)(Chevron.z,{}),onClick:()=>setVisibleDrawer("sort"!==visibleDrawer?"sort":void 0),pillStyle:"light",children:t("general:sort")}),!disableQueryPresets&&(0,jsx_runtime.jsx)(ActiveQueryPreset,{activePreset,openPresetListDrawer,resetPreset}),listMenuItems&&Array.isArray(listMenuItems)&&listMenuItems.length>0&&(0,jsx_runtime.jsx)(Popup.S,{button:(0,jsx_runtime.jsx)(Dots,{ariaLabel:t("general:moreOptions")}),className:"list-controls__popup",horizontalAlign:"right",id:"list-menu",size:"large",verticalAlign:"bottom",children:(0,jsx_runtime.jsx)(PopupButtonList.e2,{children:listMenuItems.map(((item,i_0)=>(0,jsx_runtime.jsx)(react.Fragment,{children:item},`list-menu-item-${i_0}`)))})})]})})]}),enableColumns&&(0,jsx_runtime.jsx)(AnimateHeight.D,{className:"list-controls__columns",height:"columns"===visibleDrawer?"auto":0,id:"list-controls-columns",children:(0,jsx_runtime.jsx)(ColumnSelector.g,{collectionSlug:collectionConfig.slug})}),(0,jsx_runtime.jsx)(AnimateHeight.D,{className:"list-controls__where",height:"where"===visibleDrawer?"auto":0,id:"list-controls-where",children:(0,jsx_runtime.jsx)(WhereBuilder.t,{collectionPluralLabel:collectionConfig?.labels?.plural,collectionSlug:collectionConfig.slug,fields:collectionConfig?.fields,renderedFilters,resolvedFilterOptions})})]}),PresetListDrawer,EditPresetDrawer,CreateNewPresetDrawer,DeletePresetModal]})},ListControls_stories={title:"@payloadcms/ui/elements/ListControls",component:ListControls,parameters:{docs:{description:{component:"ListControls component from @payloadcms/ui/dist/elements/ListControls"}}},argTypes:{beforeActions:{description:"beforeActions prop",table:{type:{summary:"any"}}},collectionConfig:{description:"collectionConfig prop",table:{type:{summary:"any"}}},collectionSlug:{description:"collectionSlug prop",table:{type:{summary:"any"}}},disableQueryPresets:{description:"disableQueryPresets prop",table:{type:{summary:"any"}}},enableColumns:{description:"enableColumns prop",control:"boolean",table:{type:{summary:"boolean"}}},enableSort:{description:"enableSort prop",control:"boolean",table:{type:{summary:"boolean"}}},"listMenuItems: listMenuItemsFromProps":{description:"listMenuItems: listMenuItemsFromProps prop",table:{type:{summary:"any"}}},"queryPreset: activePreset":{description:"queryPreset: activePreset prop",table:{type:{summary:"any"}}},queryPresetPermissions:{description:"queryPresetPermissions prop",table:{type:{summary:"any"}}},renderedFilters:{description:"renderedFilters prop",table:{type:{summary:"any"}}},resolvedFilterOptions:{description:"resolvedFilterOptions prop",table:{type:{summary:"any"}}}},tags:["autodocs"]},Default=(args=>(0,jsx_runtime.jsx)(ListControls,{...args})).bind({});Default.args={};const __namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => <ListControls {...args} />",...Default.parameters?.docs?.source},description:{story:"Default state of the ListControls component",...Default.parameters?.docs?.description}}}}}]);