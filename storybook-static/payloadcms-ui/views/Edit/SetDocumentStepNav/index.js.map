{"version":3,"file":"index.js","names":["c","_c","getTranslation","formatAdminURL","useEffect","useStepNav","useConfig","useDocumentInfo","useEntityVisibility","useTranslation","SetDocumentStepNav","props","$","id","collectionSlug","globalSlug","pluralLabel","useAsTitle","view","undefined","isEditing","isInitializing","title","isEntityVisible","t0","isVisible","setStepNav","i18n","t","config","t1","routes","t2","admin","adminRoute","t3","t4","nav","push","label","url","path"],"sources":["../../../../src/views/Edit/SetDocumentStepNav/index.tsx"],"sourcesContent":["'use client'\nimport type { SanitizedCollectionConfig, SanitizedGlobalConfig } from 'payload'\n\nimport { getTranslation } from '@payloadcms/translations'\nimport { formatAdminURL } from 'payload/shared'\nimport { useEffect } from 'react'\n\nimport type { StepNavItem } from '../../../elements/StepNav/index.js'\n\nimport { useStepNav } from '../../../elements/StepNav/index.js'\nimport { useConfig } from '../../../providers/Config/index.js'\nimport { useDocumentInfo } from '../../../providers/DocumentInfo/index.js'\nimport { useEntityVisibility } from '../../../providers/EntityVisibility/index.js'\nimport { useTranslation } from '../../../providers/Translation/index.js'\n\nexport const SetDocumentStepNav: React.FC<{\n  collectionSlug?: SanitizedCollectionConfig['slug']\n  globalLabel?: SanitizedGlobalConfig['label']\n  globalSlug?: SanitizedGlobalConfig['slug']\n  id?: number | string\n  pluralLabel?: SanitizedCollectionConfig['labels']['plural']\n  useAsTitle?: SanitizedCollectionConfig['admin']['useAsTitle']\n  view?: string\n}> = (props) => {\n  const { id, collectionSlug, globalSlug, pluralLabel, useAsTitle } = props\n\n  const view: string | undefined = props?.view || undefined\n\n  const { isEditing, isInitializing, title } = useDocumentInfo()\n  const { isEntityVisible } = useEntityVisibility()\n  const isVisible = isEntityVisible({ collectionSlug, globalSlug })\n\n  const { setStepNav } = useStepNav()\n\n  const { i18n, t } = useTranslation()\n\n  const {\n    config: {\n      routes: { admin: adminRoute },\n    },\n  } = useConfig()\n\n  useEffect(() => {\n    const nav: StepNavItem[] = []\n\n    if (!isInitializing) {\n      if (collectionSlug) {\n        nav.push({\n          label: getTranslation(pluralLabel, i18n),\n          url: isVisible\n            ? formatAdminURL({\n                adminRoute,\n                path: `/collections/${collectionSlug}`,\n              })\n            : undefined,\n        })\n\n        if (isEditing) {\n          nav.push({\n            label: (useAsTitle && useAsTitle !== 'id' && title) || `${id}`,\n            url: isVisible\n              ? formatAdminURL({\n                  adminRoute,\n                  path: `/collections/${collectionSlug}/${id}`,\n                })\n              : undefined,\n          })\n        } else {\n          nav.push({\n            label: t('general:createNew'),\n          })\n        }\n      } else if (globalSlug) {\n        nav.push({\n          label: title,\n          url: isVisible\n            ? formatAdminURL({\n                adminRoute,\n                path: `/globals/${globalSlug}`,\n              })\n            : undefined,\n        })\n      }\n\n      if (view) {\n        nav.push({\n          label: view,\n        })\n      }\n\n      setStepNav(nav)\n    }\n  }, [\n    setStepNav,\n    isInitializing,\n    isEditing,\n    pluralLabel,\n    id,\n    useAsTitle,\n    adminRoute,\n    t,\n    i18n,\n    title,\n    collectionSlug,\n    globalSlug,\n    view,\n    isVisible,\n  ])\n\n  return null\n}\n"],"mappings":"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","ignoreList":[]}