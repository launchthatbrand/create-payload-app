{"version":3,"file":"index.js","names":["c","_c","React","Fragment","useState","components","Tooltip","EditIcon","useAuth","useTranslation","baseClass","MultiValueLabel","props","$","data","t0","selectProps","t1","allowEdit","label","relationTo","value","t2","undefined","customProps","t3","t4","draggableProps","onDocumentDrawerOpen","permissions","showTooltip","setShowTooltip","t","hasReadPermission","Boolean","collections","read","t5","t6","t7","_jsx","children","_jsxs","className","onClick","id","collectionSlug","onKeyDown","_temp","onMouseDown","_temp2","onMouseEnter","onMouseLeave","onTouchEnd","_temp3","type","show","innerProps","e","key","stopPropagation","e_0","e_1"],"sources":["../../../../../src/fields/Relationship/select-components/MultiValueLabel/index.tsx"],"sourcesContent":["'use client'\nimport type { MultiValueProps } from 'react-select'\n\nimport React, { Fragment, useState } from 'react'\nimport { components } from 'react-select'\n\nimport type { ReactSelectAdapterProps } from '../../../../elements/ReactSelect/types.js'\nimport type { Option } from '../../types.js'\n\nimport { Tooltip } from '../../../../elements/Tooltip/index.js'\nimport { EditIcon } from '../../../../icons/Edit/index.js'\nimport { useAuth } from '../../../../providers/Auth/index.js'\nimport { useTranslation } from '../../../../providers/Translation/index.js'\nimport './index.scss'\n\nconst baseClass = 'relationship--multi-value-label'\n\nexport const MultiValueLabel: React.FC<\n  {\n    selectProps: {\n      // TODO Fix this - moduleResolution 16 breaks our declare module\n      customProps: ReactSelectAdapterProps['customProps']\n    }\n  } & MultiValueProps<Option>\n> = (props) => {\n  const {\n    data: { allowEdit, label, relationTo, value },\n    selectProps: { customProps: { draggableProps, onDocumentDrawerOpen } = {} } = {},\n  } = props\n\n  const { permissions } = useAuth()\n  const [showTooltip, setShowTooltip] = useState(false)\n  const { t } = useTranslation()\n  const hasReadPermission = Boolean(permissions?.collections?.[relationTo]?.read)\n\n  return (\n    <div className={baseClass}>\n      <div className={`${baseClass}__content`}>\n        <components.MultiValueLabel\n          {...props}\n          innerProps={{\n            className: `${baseClass}__text`,\n            ...(draggableProps || {}),\n          }}\n        />\n      </div>\n      {relationTo && hasReadPermission && allowEdit !== false && (\n        <Fragment>\n          <button\n            aria-label={`Edit ${label}`}\n            className={`${baseClass}__drawer-toggler`}\n            onClick={() => {\n              setShowTooltip(false)\n              onDocumentDrawerOpen({\n                id: value,\n                collectionSlug: relationTo,\n                hasReadPermission,\n              })\n            }}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter') {\n                e.stopPropagation()\n              }\n            }}\n            onMouseDown={(e) => e.stopPropagation()} // prevents react-select dropdown from opening\n            onMouseEnter={() => setShowTooltip(true)}\n            onMouseLeave={() => setShowTooltip(false)}\n            onTouchEnd={(e) => e.stopPropagation()} // prevents react-select dropdown from opening\n            type=\"button\"\n          >\n            <Tooltip className={`${baseClass}__tooltip`} show={showTooltip}>\n              {t('general:editLabel', { label: '' })}\n            </Tooltip>\n            <EditIcon className={`${baseClass}__icon`} />\n          </button>\n        </Fragment>\n      )}\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]}