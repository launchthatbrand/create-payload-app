{"version":3,"file":"CodeEditor.js","names":["c","_c","EditorImport","React","useState","useTheme","ShimmerEffect","Editor","default","baseClass","CodeEditor","props","$","className","maxHeight","minHeight","options","readOnly","rest","MIN_HEIGHT","paddingFromProps","padding","top","bottom","dynamicHeight","setDynamicHeight","theme","t0","defaultLanguage","t1","t2","filter","Boolean","classes","join","t3","t4","t5","value","ev","onChange","Math","max","split","length","editor","monaco","onMount","getValue","_jsx","loading","height","scrollbar","alwaysConsumeMouseWheel","scrollBeyondLastLine","tabSize","wordWrap","min"],"sources":["../../../src/elements/CodeEditor/CodeEditor.tsx"],"sourcesContent":["'use client'\nimport EditorImport from '@monaco-editor/react'\nimport React, { useState } from 'react'\n\nimport type { Props } from './types.js'\n\nimport { useTheme } from '../../providers/Theme/index.js'\nimport { ShimmerEffect } from '../ShimmerEffect/index.js'\nimport './index.scss'\n\nconst Editor = (EditorImport.default || EditorImport) as unknown as typeof EditorImport.default\n\nconst baseClass = 'code-editor'\n\nconst CodeEditor: React.FC<Props> = (props) => {\n  const { className, maxHeight, minHeight, options, readOnly, ...rest } = props\n  const MIN_HEIGHT = minHeight ?? 56 // equivalent to 3 lines\n  const paddingFromProps = options?.padding\n    ? (options.padding.top || 0) + (options.padding?.bottom || 0)\n    : 0\n\n  const [dynamicHeight, setDynamicHeight] = useState(MIN_HEIGHT)\n  const { theme } = useTheme()\n\n  const classes = [\n    baseClass,\n    className,\n    rest?.defaultLanguage ? `language--${rest.defaultLanguage}` : '',\n    readOnly && 'read-only',\n  ]\n    .filter(Boolean)\n    .join(' ')\n\n  return (\n    <Editor\n      className={classes}\n      loading={<ShimmerEffect height={dynamicHeight} />}\n      options={{\n        detectIndentation: true,\n        hideCursorInOverviewRuler: true,\n        minimap: {\n          enabled: false,\n        },\n        overviewRulerBorder: false,\n        readOnly: Boolean(readOnly),\n        scrollbar: {\n          alwaysConsumeMouseWheel: false,\n        },\n        scrollBeyondLastLine: false,\n        tabSize: 2,\n        wordWrap: 'on',\n        ...options,\n      }}\n      theme={theme === 'dark' ? 'vs-dark' : 'vs'}\n      {...rest}\n      // Since we are not building an IDE and the container\n      // can already have scrolling, we want the height of the\n      // editor to fit its content.\n      // See: https://github.com/microsoft/monaco-editor/discussions/3677\n      height={maxHeight ? Math.min(dynamicHeight, maxHeight) : dynamicHeight}\n      onChange={(value, ev) => {\n        rest.onChange?.(value, ev)\n        setDynamicHeight(Math.max(MIN_HEIGHT, value.split('\\n').length * 18 + 2 + paddingFromProps))\n      }}\n      onMount={(editor, monaco) => {\n        rest.onMount?.(editor, monaco)\n        setDynamicHeight(\n          Math.max(MIN_HEIGHT, editor.getValue().split('\\n').length * 18 + 2 + paddingFromProps),\n        )\n      }}\n    />\n  )\n}\n\n// eslint-disable-next-line no-restricted-exports\nexport default CodeEditor\n"],"mappings":"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","ignoreList":[]}