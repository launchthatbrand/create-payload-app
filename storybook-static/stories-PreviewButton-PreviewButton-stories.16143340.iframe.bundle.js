"use strict";(self.webpackChunkcreate_payload_app=self.webpackChunkcreate_payload_app||[]).push([[1358],{"./.storybook/mockComponentWrappers.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>withSafeLinks});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/jsx-runtime.js");__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/index.js");const withSafeLinks=Component=>props=>{const safeProps={...props,href:props.href||"#",to:props.to||"#"};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Component,{...safeProps})}},"./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/PreviewButton/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>PreviewButton});var compiler_runtime=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/compiler-runtime.js"),jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/index.js"),Button=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/Button/index.js"),stringify=__webpack_require__("./node_modules/.pnpm/qs-esm@7.0.2/node_modules/qs-esm/lib/stringify.js"),dist=__webpack_require__("./node_modules/.pnpm/sonner@1.7.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/sonner/dist/index.mjs"),Config=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/Config/index.js"),DocumentInfo=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/DocumentInfo/index.js"),Locale=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/Locale/index.js"),Translation=__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/providers/Translation/index.js");const usePreviewURL=()=>{const{id,collectionSlug,globalSlug,versionCount}=(0,DocumentInfo.r)(),[isLoading,setIsLoading]=(0,react.useState)(!1),[previewURL,setPreviewURL]=(0,react.useState)(""),{code:locale}=(0,Locale.Ym)(),hasVersions=versionCount>0,{config:{routes:{api},serverURL}}=(0,Config.U)(),{t}=(0,Translation.B)(),isGeneratingPreviewURL=(0,react.useRef)(!1);return{generatePreviewURL:(0,react.useCallback)((async({openPreviewWindow=!1})=>{if(!isGeneratingPreviewURL.current){isGeneratingPreviewURL.current=!0;try{setIsLoading(!0);let url=`${serverURL}${api}`;collectionSlug&&(url=`${url}/${collectionSlug}/${id}/preview`),globalSlug&&(url=`${url}/globals/${globalSlug}/preview`);const params={draft:hasVersions?"true":"false",locale:locale||void 0},res=await fetch(`${url}?${stringify.A(params)}`);if(!res.ok)throw new Error;const newPreviewURL=await res.json();if(!newPreviewURL)throw new Error;setPreviewURL(newPreviewURL),setIsLoading(!1),isGeneratingPreviewURL.current=!1,openPreviewWindow&&window.open(newPreviewURL,"_blank")}catch(err){setIsLoading(!1),isGeneratingPreviewURL.current=!1,dist.oR.error(t("error:previewing"))}}}),[serverURL,api,collectionSlug,globalSlug,hasVersions,locale,id,t]),isLoading,label:t(isLoading?"general:loading":"version:preview"),previewURL}},baseClass="preview-btn";function PreviewButton(props){const $=(0,compiler_runtime.c)(5),{generatePreviewURL,label}=usePreviewURL();let t0,t1;return $[0]!==generatePreviewURL?(t0=()=>generatePreviewURL({openPreviewWindow:!0}),$[0]=generatePreviewURL,$[1]=t0):t0=$[1],$[2]!==label||$[3]!==t0?(t1=(0,jsx_runtime.jsx)(Button.$,{buttonStyle:"secondary",className:baseClass,icon:"link",iconPosition:"left",onClick:t0,size:"medium",children:label}),$[2]=label,$[3]=t0,$[4]=t1):t1=$[4],t1}},"./src/stories/PreviewButton/PreviewButton.stories.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/jsx-runtime.js"),_payloadcms_ui_elements_PreviewButton__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/.pnpm/next@15.2.3_@babel+core@7.26.10_react-dom@19.0.0_react@19.0.0__react@19.0.0_sass@1.77.4/node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./node_modules/.pnpm/@payloadcms+ui@3.31.0_@types+react@19.0.12_monaco-editor@0.52.2_next@15.2.3_@babel+core@7.26._s35ydyxurzhrrb4ha2zknhusuy/node_modules/@payloadcms/ui/dist/elements/PreviewButton/index.js"));const SafePreviewButton=(0,__webpack_require__("./.storybook/mockComponentWrappers.js").j)(_payloadcms_ui_elements_PreviewButton__WEBPACK_IMPORTED_MODULE_3__.P),__WEBPACK_DEFAULT_EXPORT__={title:"@payloadcms/ui/elements/PreviewButton",component:_payloadcms_ui_elements_PreviewButton__WEBPACK_IMPORTED_MODULE_3__.P,parameters:{docs:{description:{component:"PreviewButton component from @payloadcms/ui/dist/elements/PreviewButton"}}},argTypes:{},tags:["autodocs"]},Default=(args=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SafePreviewButton,{...args})).bind({});Default.args={href:"#",title:"PreviewButton Example"};const __namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => <SafePreviewButton {...args} />",...Default.parameters?.docs?.source},description:{story:"Default state of the PreviewButton component",...Default.parameters?.docs?.description}}}}}]);